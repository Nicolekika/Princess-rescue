<!doctype html>
<meta charset="utf-8">
<title>PR test</title>
<style>
  body{margin:0;display:grid;place-items:center;height:100vh;background:#ffeef7;font-family:system-ui}
  canvas{border:1px solid #f2d9e8;border-radius:12px;background:#fff0f6;width:min(92vw,960px);height:auto}
  .hud{position:fixed;top:10px;left:10px;background:#fff;border:1px solid #f2d9e8;border-radius:10px;padding:6px 10px}
  button{margin-left:8px}
</style>
<div class="hud">‚è± <span id="t">0.0</span>s <button id="snd">üîá Lofi</button></div>
<canvas id="c" width="960" height="540"></canvas>
<audio id="bgm" src="./lofi.mp3" preload="auto" loop playsinline></audio>
<script>
(() => {
  const cv = document.getElementById('c'), g = cv.getContext('2d');
  const tEl = document.getElementById('t'), btn = document.getElementById('snd'), bgm = document.getElementById('bgm');
  bgm.volume = 0.15; let music = false;

  btn.onclick = () => {
    if (!music) { bgm.play().then(()=>{ music = true; btn.textContent='üéß Lofi'; }).catch(e=>alert('Klicka igen / h√∂j volym')); }
    else { bgm.pause(); music=false; btn.textContent='üîá Lofi'; }
  };

  let x = 20, v = 2, t0 = performance.now();
  function loop(t){
    tEl.textContent = ((t - t0)/1000).toFixed(1);
    g.fillStyle = '#ffe7f2'; g.fillRect(0,0,cv.width,cv.height);
    g.fillStyle = '#ff7aa2'; g.beginPath(); g.arc(x, 200, 20, 0, Math.PI*2); g.fill();
    x += v; if (x<20 || x>cv.width-20) v *= -1;
    requestAnimationFrame(loop);
  }
  loop(performance.now());
})();
</script>
